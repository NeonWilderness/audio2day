!function(e,t,a){"use strict";var i="ontouchstart"in t,o=i?"touchstart":"mousedown",n=i?"touchmove":"mousemove",l=i?"touchcancel":"mouseup",d=function(e){var t=e/3600,a=Math.floor(t),i=e%3600/60,o=Math.floor(i),n=Math.ceil(e%3600%60);return n>59&&(n=0,o=Math.ceil(i)),o>59&&(o=0,a=Math.ceil(t)),(0===a?"":a>0&&a.toString().length<2?"0"+a+":":a+":")+(o.toString().length<2?"0"+o:o)+":"+(n.toString().length<2?"0"+n:n)},s=function(e){var t=a.createElement("audio");return!(!t.canPlayType||!t.canPlayType("audio/"+e.split(".").pop().toLowerCase()+";").replace(/no/,""))};e.fn.audioPlayer=function(t){var a=e.extend({classPrefix:"audioplayer",strPlay:"Wiedergabe",strPause:"Pause",strVolume:"Lautstärke"},t),u='<audio preload="auto" controls{autoplay}{loop}><source src="{file}" type="audio/mpeg"></audio>',r={"true":" autoplay","false":""},m={"true":" loop","false":""},v={},c={playPause:"playpause",playing:"playing",stopped:"stopped",time:"time",timeCurrent:"time-current",timeDuration:"time-duration",bar:"bar",barLoaded:"bar-loaded",barPlayed:"bar-played",volume:"volume",volumeButton:"volume-button",volumeAdjust:"volume-adjust",noVolume:"novolume",muted:"muted",mini:"mini",songTitle:"title"};for(var h in c)v[h]=a.classPrefix+"-"+c[h];return this.each(function(){var t=e(this),c=t.attr("title")||"",h=!1,f=!1,p=!1,g=t.text(),y=t.attr("class").toLowerCase().split(/\s+/);if(e.each(y,function(){switch(this){case"autoplay":h=!0;break;case"loop":f=!0}}),0===c.length)return t.html('<p class="message">Bitte die URL der Audiodatei im DIV-Attribut "title" ergänzen!</p>'),void 0;p=s(c);var b,C=e('<div class="'+a.classPrefix+'">'+(p?u.replace(/{file}/,c).replace(/{autoplay}/,r[h]).replace(/{loop}/,m[f]):'<embed src="'+c+'" width="0" height="0" volume="100" autostart="'+h.toString()+'" loop="'+f.toString()+'" />')+'<div class="'+v.playPause+'" title="'+a.strPlay+'"><a href="#">'+a.strPlay+"</a></div></div>"),P=p?C.find("audio"):C.find("embed");if(P=P.get(0),p){C.find("audio").css({width:0,height:0,visibility:"hidden"}),C.append('<div class="'+v.time+" "+v.timeCurrent+'"></div><div class="'+v.bar+'"><div class="'+v.barLoaded+'"></div><div class="'+v.barPlayed+'"></div>'+(g.length>0?'<div class="'+v.songTitle+'">'+g+"</div>":"")+'</div><div class="'+v.time+" "+v.timeDuration+'"></div><div class="'+v.volume+'"><div class="'+v.volumeButton+'" title="'+a.strVolume+'"><a href="#">'+a.strVolume+'</a></div><div class="'+v.volumeAdjust+'"><div><div></div></div></div></div>');var w=C.find("."+v.bar),L=C.find("."+v.barPlayed),M=C.find("."+v.barLoaded),E=C.find("."+v.timeCurrent),T=C.find("."+v.timeDuration),S=C.find("."+v.volumeButton),V=C.find("."+v.volumeAdjust+" > div"),j=0,x=function(e){b=i?e.originalEvent.touches[0]:e,P.currentTime=Math.round(P.duration*(b.pageX-w.offset().left)/w.width())},A=function(e){b=i?e.originalEvent.touches[0]:e,P.volume=Math.abs((b.pageY-(V.offset().top+V.height()))/V.height())},k=function(){var e=setInterval(function(){return P.buffered.length<1?!0:(M.width(P.buffered.end(0)/P.duration*100+"%"),Math.floor(P.buffered.end(0))>=Math.floor(P.duration)&&clearInterval(e),void 0)},100)},B=P.volume,D=P.volume=.111;Math.round(1e3*P.volume)/1e3==D?P.volume=B:C.addClass(v.noVolume),T.html("&hellip;"),E.html(d(0)),P.addEventListener("loadeddata",function(){k(),T.html(e.isNumeric(P.duration)?d(P.duration):"&hellip;"),V.find("div").height(100*P.volume+"%"),j=P.volume}),P.addEventListener("timeupdate",function(){E.html(d(P.currentTime)),L.width(P.currentTime/P.duration*100+"%")}),P.addEventListener("volumechange",function(){V.find("div").height(100*P.volume+"%"),P.volume>0&&C.hasClass(v.muted)&&C.removeClass(v.muted),P.volume<=0&&!C.hasClass(v.muted)&&C.addClass(v.muted)}),P.addEventListener("ended",function(){C.removeClass(v.playing).addClass(v.stopped)}),w.on(o,function(e){x(e),w.on(n,function(e){x(e)})}).on(l,function(){w.unbind(n)}),S.on("click",function(){return C.hasClass(v.muted)?(C.removeClass(v.muted),P.volume=j):(C.addClass(v.muted),j=P.volume,P.volume=0),!1}),V.on(o,function(e){A(e),V.on(n,function(e){A(e)})}).on(l,function(){V.unbind(n)})}else C.addClass(v.mini);C.addClass(h?v.playing:v.stopped),C.find("."+v.playPause).on("click",function(){return C.hasClass(v.playing)?(e(this).attr("title",a.strPlay).find("a").html(a.strPlay),C.removeClass(v.playing).addClass(v.stopped),p?P.pause():P.Stop()):(e(this).attr("title",a.strPause).find("a").html(a.strPause),C.addClass(v.playing).removeClass(v.stopped),p?P.play():P.Play()),!1}),t.replaceWith(C)}),this}}(jQuery,window,document);